


<ng-form name="buildForm">
    <div class="panel-group">


        <p>Describe your study. This information will be shown to each participant when they first join your experiment.</p>
        <input ng-model="ctrl.experiment.description">

        <p>Conclusion text. This will be shown to participants when they have reviewed all {{ctrl.experiment.plural}}.</p>
        <input ng-model="ctrl.experiment.conclusion">

        <div class="panel panel-default">
            <div class="panel-heading">Options</div>
            <div class="panel-body">

                <div class="checkbox" data-toggle="tooltip" title="Participants will not be able to overwrite their responses.">
                    <label>
                        <input type="checkbox" ng-model="ctrl.study.lock_responses">
                        Lock responses
                    </label>
                </div>

                <div class="form-group" data-toggle="tooltip" title="Number of times to alias the identity of each {{ctrl.experiment.moniker}}.">
                    <label>Aliases</label>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-value="0" ng-model="ctrl.study.aliases">
                            None - Everyone knows the identity of each {{ctrl.experiment.moniker}}
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-value="1" ng-model="ctrl.study.aliases">
                            Single Blind - Only you know the identity of each {{ctrl.experiment.moniker}}
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-value="2" ng-model="ctrl.study.aliases" aria-describedby="reqCoop">
                            Double Blind - Nobody knows the identity of each {{ctrl.experiment.moniker}}
                            <small id="reqCoop" class="form-text text-muted" style="display:block">
                                *requires cooperation with a participant
                            </small>
                        </label>
                    </div>
                </div>

            </div>
        </div>


        <div class="panel panel-default">
            <div class="panel-heading">Preliminary questions - asked once per participant before they review any {{ctrl.experiment.plural}}</div>
            <div class="panel-body">

                <div class="input-group">
                    <input type="text" class="form-control"
                           id="newPreQuestion"
                           ng-model="ctrl.newPreQuestion"
                           ng-keyup="$event.keyCode == 13 && ctrl.addPreQuestion()"
                           placeholder="New Study Question...">
                    <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-mouseup="ctrl.addPreQuestion()">Add Question</button>
                        </span>
                </div>

                <div class="panel _question-panel" ng-repeat="question in ctrl.experiment.preQuestions">
                    <input class="form-control _question-text" ng-model="question.text">
                    <div class="checkbox _question-req" data-toggle="tooltip" title="Require participants to provide a response to this question.">
                        <label>
                            <input type="checkbox" ng-model="question.required">
                            required
                        </label>
                    </div>
                    <div  class="_question-del" ng-click="ctrl.deleteQuestion(question, $index)">
                        <span class="glyphicon glyphicon-remove" ></span>
                    </div>
                </div>


            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Subject questions - Asked for each {{ctrl.experiment.moniker}}</div>
            <div class="panel-body">

                <div class="input-group">
                    <input type="text" class="form-control"
                           id="newQuestion"
                           ng-model="ctrl.newQuestion"
                           ng-keyup="$event.keyCode == 13 && ctrl.addQuestion()"
                           placeholder="New Subject Question...">
                    <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-mouseup="ctrl.addQuestion()">Add Question</button>
                        </span>
                </div>

                <div class="panel _question-panel" ng-repeat="question in ctrl.experiment.questions">
                    <input class="form-control _question-text" ng-model="question.text">
                    <div class="checkbox _question-req" data-toggle="tooltip" title="Require participants to provide a response to this question.">
                        <label>
                            <input type="checkbox" ng-model="question.required">
                            required
                        </label>
                    </div>
                    <div  class="_question-del" ng-click="ctrl.deleteQuestion(question, $index)">
                        <span class="glyphicon glyphicon-remove" ></span>
                    </div>
                </div>

            </div>
        </div>

    </div>
